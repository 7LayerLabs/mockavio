# Mockavio - Feature Specifications

## 1. Team Workspaces

### Overview
Allow multiple users to collaborate on projects, share assets, and manage team workflows.

### User Stories
- As a team owner, I want to invite members so they can access shared projects
- As a team member, I want to see all team projects in one workspace
- As a team admin, I want to manage permissions for different users
- As a team owner, I want to track usage across all team members

### Database Schema

```typescript
// teams table
{
  id: string              // UUID
  name: string            // "Smith Realty Team"
  ownerId: string         // User who created team
  plan: 'starter' | 'professional' | 'enterprise'
  imageQuota: number      // Based on plan
  imageUsed: number       // Current month usage
  quotaResetDate: number  // Timestamp
  createdAt: number       // Timestamp
  stripeCustomerId: string
  stripeSubscriptionId: string
}

// teamMembers table
{
  id: string              // UUID
  teamId: string          // FK to teams
  userId: string          // FK to users
  email: string           // For pending invites
  role: 'owner' | 'admin' | 'member'
  status: 'pending' | 'active' | 'suspended'
  invitedAt: number       // Timestamp
  invitedBy: string       // User ID who invited
  joinedAt: number | null // Timestamp when accepted
  lastActiveAt: number    // Timestamp
}

// teamProjects table
{
  id: string              // UUID
  teamId: string          // FK to teams
  name: string            // "123 Main St Staging"
  createdBy: string       // User ID
  images: string[]        // Array of image URLs
  sharedWith: string[]    // Array of user IDs with access
  createdAt: number       // Timestamp
  updatedAt: number       // Timestamp
}
```

### API Endpoints

#### Create Team
```typescript
POST /api/teams/create
Headers: Authorization: Bearer <token>
Body: {
  name: string
  plan: 'starter' | 'professional' | 'enterprise'
}
Response: {
  success: boolean
  teamId: string
  team: Team
}
```

#### Invite Member
```typescript
POST /api/teams/invite
Headers: Authorization: Bearer <token>
Body: {
  teamId: string
  email: string
  role: 'admin' | 'member'
}
Response: {
  success: boolean
  inviteToken: string
  inviteLink: string  // mockavio.com/invite/{token}
}
```

#### Accept Invite
```typescript
POST /api/teams/accept-invite
Headers: Authorization: Bearer <token>
Body: {
  inviteToken: string
}
Response: {
  success: boolean
  teamId: string
  team: Team
}
```

#### List Team Members
```typescript
GET /api/teams/{teamId}/members
Headers: Authorization: Bearer <token>
Response: {
  success: boolean
  members: TeamMember[]
}
```

#### Remove Member
```typescript
DELETE /api/teams/{teamId}/members/{userId}
Headers: Authorization: Bearer <token>
Response: {
  success: boolean
}
```

### UI Components

#### Team Workspace Dashboard
**Location:** `/app/(mockavio)/workspace/page.tsx`

**Features:**
- List of all team projects
- Member avatars/activity indicators
- Create new project button
- Team settings link
- Usage meter (images used/quota)

#### Team Settings
**Location:** `/app/(mockavio)/settings/team/page.tsx`

**Tabs:**
1. **Members** - List, invite, remove, change roles
2. **Billing** - Plan details, usage, upgrade/downgrade
3. **Permissions** - Who can do what
4. **Integrations** - API keys, webhooks (future)

#### Project Collaboration View
**Location:** `/app/(mockavio)/project/[id]/page.tsx`

**Features:**
- Real-time presence indicators ("Jamie is viewing")
- Comment system on images
- Version history
- Share project with specific members
- Export project as presentation

### Permissions Matrix

| Action | Owner | Admin | Member |
|--------|-------|-------|--------|
| Create projects | ✅ | ✅ | ✅ |
| Delete projects | ✅ | ✅ | Own only |
| Invite members | ✅ | ✅ | ❌ |
| Remove members | ✅ | ✅ | ❌ |
| Manage billing | ✅ | ❌ | ❌ |
| Change plan | ✅ | ❌ | ❌ |
| Generate API keys | ✅ | ✅ | ❌ |
| Export white label | ✅ | ✅ | ✅ |
| View usage stats | ✅ | ✅ | Own only |

### Implementation Steps
1. Create InstantDB schema for teams and teamMembers
2. Build team creation flow
3. Implement invite system with email notifications
4. Create team workspace UI
5. Add team context to image processing
6. Build team settings page
7. Implement usage tracking per team
8. Add team billing in Stripe
9. Create project collaboration features
10. Add real-time presence indicators

---

## 2. White Label Exports

### Overview
Allow Professional and Enterprise customers to export images without Mockavio branding and optionally add their own logo.

### User Stories
- As a designer, I want to remove "Generated by Mockavio" watermarks
- As an agency, I want to add my logo to all exports
- As a realtor, I want to customize the export branding per client

### Database Schema

```typescript
// whiteLabelSettings table
{
  id: string              // UUID
  userId: string          // FK to users
  teamId: string | null   // FK to teams (team-wide settings)
  logoUrl: string | null  // Uploaded logo
  watermarkText: string | null  // Custom watermark
  brandColors: {
    primary: string       // Hex color
    secondary: string     // Hex color
  }
  showBranding: boolean   // Show user's branding vs no branding
  position: 'bottom-right' | 'bottom-left' | 'top-right' | 'top-left' | 'center'
  opacity: number         // 0-100
  createdAt: number       // Timestamp
  updatedAt: number       // Timestamp
}
```

### API Endpoints

#### Upload Logo
```typescript
POST /api/white-label/upload-logo
Headers: Authorization: Bearer <token>
Body: FormData with 'logo' file
Response: {
  success: boolean
  logoUrl: string
}
```

#### Update Branding Settings
```typescript
PUT /api/white-label/settings
Headers: Authorization: Bearer <token>
Body: {
  watermarkText?: string
  brandColors?: { primary: string, secondary: string }
  showBranding?: boolean
  position?: string
  opacity?: number
}
Response: {
  success: boolean
  settings: WhiteLabelSettings
}
```

#### Export with Branding
```typescript
POST /api/export/branded
Headers: Authorization: Bearer <token>
Body: {
  imageUrl: string
  applyBranding: boolean
  format: 'png' | 'jpeg' | 'webp'
  quality: number (1-100)
}
Response: {
  success: boolean
  exportUrl: string  // Download link
}
```

### UI Components

#### Branding Settings Page
**Location:** `/app/(mockavio)/settings/branding/page.tsx`

**Sections:**

1. **Logo Upload**
   - Drag & drop or click to upload
   - Preview of logo
   - Recommended size: 200x50px
   - Supported formats: PNG, SVG
   - Delete logo button

2. **Watermark Text**
   - Text input for custom watermark
   - Example: "Presented by Smith Realty"
   - Character limit: 50

3. **Brand Colors**
   - Color picker for primary color
   - Color picker for secondary color
   - Preview showing colors in use

4. **Watermark Position**
   - Radio buttons or dropdown
   - Visual preview of position options
   - Options: bottom-right, bottom-left, top-right, top-left, center

5. **Opacity Control**
   - Slider from 0-100%
   - Live preview

6. **Toggle Branding**
   - Switch: "Show my branding" vs "No branding"
   - Only available on Pro/Enterprise plans

#### Export Modal (Enhanced)
**Location:** `components/mockavio/ExportModal.tsx`

**New Features:**
- Checkbox: "Apply white label branding"
  - Checked by default for Pro/Enterprise
  - Shows preview of branded export
- Format selector (PNG, JPEG, WebP)
- Quality slider (PNG/JPEG)
- Batch export option (export all images in project)

### Image Processing Pipeline

```typescript
// lib/export-processor.ts

async function applyWhiteLabel(
  imageUrl: string,
  settings: WhiteLabelSettings
): Promise<string> {
  // 1. Load original image
  const image = await loadImage(imageUrl)

  // 2. Create canvas
  const canvas = createCanvas(image.width, image.height)
  const ctx = canvas.getContext('2d')

  // 3. Draw original image
  ctx.drawImage(image, 0, 0)

  // 4. Remove Mockavio branding (if exists)
  // This would identify and remove the default watermark

  // 5. Apply custom logo (if enabled)
  if (settings.showBranding && settings.logoUrl) {
    const logo = await loadImage(settings.logoUrl)
    const position = calculatePosition(
      settings.position,
      canvas.width,
      canvas.height,
      logo.width,
      logo.height
    )
    ctx.globalAlpha = settings.opacity / 100
    ctx.drawImage(logo, position.x, position.y)
  }

  // 6. Apply custom watermark text (if enabled)
  if (settings.showBranding && settings.watermarkText) {
    ctx.font = '20px Arial'
    ctx.fillStyle = settings.brandColors.primary
    ctx.globalAlpha = settings.opacity / 100
    // Position and draw text
  }

  // 7. Export as requested format
  return canvas.toDataURL('image/png')
}
```

### Implementation Steps
1. Create whiteLabelSettings schema in InstantDB
2. Build settings page UI
3. Implement logo upload to cloud storage
4. Create image processing pipeline for branding
5. Add white label toggle to export modal
6. Implement batch export with branding
7. Add plan-based permissions check
8. Create preview functionality
9. Add watermark removal logic
10. Test with various image sizes and formats

---

## 3. Client Galleries

### Overview
Create shareable galleries where clients can view, comment on, and download images without needing a Mockavio account.

### User Stories
- As a designer, I want to share 10 design options with my client
- As a realtor, I want to collect feedback on staging options
- As a client, I want to view options and pick my favorite
- As a professional, I want galleries to expire after 30 days for security

### Database Schema

```typescript
// clientGalleries table
{
  id: string              // UUID
  teamId: string | null   // FK to teams (team galleries)
  userId: string          // Creator user ID
  title: string           // "Kitchen Design Options - 123 Main St"
  description: string     // Optional description
  shareToken: string      // Unique shareable token (short UUID)
  password: string | null // Optional password protection
  expiresAt: number | null // Timestamp (default 30 days)
  isActive: boolean       // Can deactivate manually
  allowDownloads: boolean // Let clients download images
  allowComments: boolean  // Let clients leave feedback
  requireEmail: boolean   // Require email to view
  viewCount: number       // Track views
  createdAt: number       // Timestamp
  lastViewedAt: number    // Timestamp
}

// galleryImages table
{
  id: string              // UUID
  galleryId: string       // FK to clientGalleries
  imageUrl: string        // URL to image
  thumbnailUrl: string    // URL to thumbnail
  title: string           // "Option 1: Modern Farmhouse"
  description: string     // Optional notes
  order: number           // Display order
  votes: number           // Client votes/likes
  createdAt: number       // Timestamp
}

// galleryComments table
{
  id: string              // UUID
  galleryId: string       // FK to clientGalleries
  imageId: string | null  // FK to galleryImages (null = general comment)
  visitorName: string     // Client name
  visitorEmail: string    // Client email
  comment: string         // Feedback text
  rating: number | null   // 1-5 stars
  createdAt: number       // Timestamp
}

// galleryViews table (analytics)
{
  id: string              // UUID
  galleryId: string       // FK to clientGalleries
  visitorEmail: string | null
  ipAddress: string       // For uniqueness tracking
  userAgent: string       // Browser info
  viewedAt: number        // Timestamp
}
```

### API Endpoints

#### Create Gallery
```typescript
POST /api/galleries/create
Headers: Authorization: Bearer <token>
Body: {
  title: string
  description?: string
  imageUrls: string[]  // Array of image URLs to include
  expiresInDays?: number  // Default 30
  password?: string
  allowDownloads?: boolean  // Default true
  allowComments?: boolean   // Default true
  requireEmail?: boolean    // Default false
}
Response: {
  success: boolean
  galleryId: string
  shareUrl: string  // mockavio.com/gallery/{shareToken}
  shareToken: string
}
```

#### View Gallery (Public)
```typescript
GET /api/galleries/{shareToken}
Query: ?email={email}&password={password}
Response: {
  success: boolean
  gallery: {
    title: string
    description: string
    images: GalleryImage[]
    allowDownloads: boolean
    allowComments: boolean
    expiresAt: number
  }
}
```

#### Add Comment (Public)
```typescript
POST /api/galleries/{shareToken}/comment
Body: {
  imageId?: string  // Optional - null for general feedback
  visitorName: string
  visitorEmail: string
  comment: string
  rating?: number  // 1-5
}
Response: {
  success: boolean
  commentId: string
}
```

#### Vote on Image (Public)
```typescript
POST /api/galleries/{shareToken}/vote
Body: {
  imageId: string
}
Response: {
  success: boolean
  newVoteCount: number
}
```

#### Gallery Analytics
```typescript
GET /api/galleries/{galleryId}/analytics
Headers: Authorization: Bearer <token>
Response: {
  success: boolean
  analytics: {
    totalViews: number
    uniqueVisitors: number
    commentCount: number
    downloadCount: number
    imageVotes: { imageId: string, votes: number }[]
    topImage: { imageId: string, title: string, votes: number }
    viewsByDay: { date: string, views: number }[]
  }
}
```

#### Update Gallery
```typescript
PUT /api/galleries/{galleryId}
Headers: Authorization: Bearer <token>
Body: {
  title?: string
  description?: string
  expiresAt?: number
  isActive?: boolean
  addImages?: string[]  // URLs to add
  removeImages?: string[]  // IDs to remove
}
Response: {
  success: boolean
  gallery: ClientGallery
}
```

#### Delete Gallery
```typescript
DELETE /api/galleries/{galleryId}
Headers: Authorization: Bearer <token>
Response: {
  success: boolean
}
```

### UI Components

#### Gallery Creation Modal
**Location:** `components/mockavio/CreateGalleryModal.tsx`

**Steps:**

**Step 1: Select Images**
- Show all images from current project/history
- Multi-select checkboxes
- Preview thumbnails

**Step 2: Gallery Details**
- Title input
- Description textarea
- Expiration date picker (default 30 days)
- Password protection toggle + input
- Settings checkboxes:
  - ☐ Allow downloads
  - ☐ Allow comments
  - ☐ Require email to view

**Step 3: Review & Share**
- Preview of gallery
- Copy share link button
- QR code for easy mobile sharing
- Email invitation form (send link directly to client)

#### Gallery Management Page
**Location:** `/app/(mockavio)/galleries/page.tsx`

**Features:**
- List all galleries
- Status indicators (active, expired, views)
- Quick actions: Copy link, View analytics, Deactivate, Delete
- Filter by: Active, Expired, All
- Sort by: Created date, View count, Expiration date

#### Gallery View Page (Public)
**Location:** `/app/gallery/[shareToken]/page.tsx`

**No login required!**

**Layout:**
- Hero with title and description
- Grid of images with titles
- Hover to see vote count and comments
- Click image for full-size lightbox
- Comment section per image
- Overall feedback form
- Download button (if enabled)
- Vote/like button per image

**Security:**
- Check expiration date
- Check if deactivated
- Require password if set
- Require email if set (store for analytics)
- Rate limiting on voting/comments

#### Gallery Analytics Page
**Location:** `/app/(mockavio)/galleries/[id]/analytics/page.tsx`

**Charts & Metrics:**
- Total views over time (line chart)
- Unique visitors
- Image popularity (bar chart of votes)
- Comment sentiment analysis (positive/negative/neutral)
- Download count
- Average time on gallery
- Device breakdown (desktop/mobile)
- Geographic data (if available)

**Export Options:**
- Download as PDF report
- Download as CSV
- Email report to client

### Email Templates

#### Gallery Created Confirmation
```
Subject: Your client gallery is ready to share

Hi {user_name},

Your gallery "{gallery_title}" is ready!

Share link: {share_url}

Gallery stats:
- {image_count} images
- Expires: {expiration_date}
- Password protected: {yes/no}

[Copy Link] [View Gallery] [View Analytics]
```

#### Gallery Invitation (to client)
```
Subject: {user_name} shared design options with you

Hi {client_name},

{user_name} from {company_name} has shared design options for your review.

View gallery: {share_url}

{Optional password instructions if protected}

You can view options, leave comments, and vote on your favorites.

This link expires on {expiration_date}.
```

#### New Comment Notification
```
Subject: New feedback on your gallery

Hi {user_name},

{visitor_name} left feedback on "{gallery_title}":

"{comment_preview}"

[View Full Comment] [Respond]
```

### Implementation Steps
1. Create gallery database schema in InstantDB
2. Build gallery creation modal
3. Implement share token generation
4. Create public gallery view page (no auth)
5. Add commenting system
6. Implement voting/liking feature
7. Build gallery management dashboard
8. Create analytics tracking
9. Build analytics visualization page
10. Implement email notifications
11. Add password protection
12. Add expiration logic
13. Create QR code generation
14. Build email invitation system
15. Test security and rate limiting

---

## 4. API Access

### Overview
Allow Professional and Enterprise customers to integrate Mockavio transformations into their own applications and workflows.

### User Stories
- As a real estate platform, I want to offer AI staging as a built-in feature
- As an agency, I want to automate mockup generation from CRM data
- As a developer, I want to integrate Mockavio into my workflow tools

### Database Schema

```typescript
// apiKeys table
{
  id: string              // UUID
  userId: string          // FK to users
  teamId: string | null   // FK to teams
  name: string            // "Production API Key" or "CRM Integration"
  key: string             // API key (hashed in DB)
  keyPrefix: string       // First 8 chars for display (mock_prod_abc123)
  permissions: string[]   // ['transform', 'batch', 'gallery']
  rateLimit: number       // Requests per hour based on plan
  isActive: boolean       // Can deactivate keys
  lastUsedAt: number | null
  createdAt: number       // Timestamp
  expiresAt: number | null // Optional expiration
}

// apiUsage table
{
  id: string              // UUID
  apiKeyId: string        // FK to apiKeys
  endpoint: string        // '/api/v1/transform'
  method: string          // 'POST'
  statusCode: number      // 200, 400, 500, etc.
  responseTime: number    // Milliseconds
  imageCount: number      // How many images processed
  errorMessage: string | null
  requestedAt: number     // Timestamp
}
```

### API Endpoints

#### Generate API Key
```typescript
POST /api/keys/generate
Headers: Authorization: Bearer <token>
Body: {
  name: string
  permissions: string[]
  expiresInDays?: number
}
Response: {
  success: boolean
  apiKey: string  // ONLY TIME THIS IS SHOWN - must copy now
  keyPrefix: string
  keyId: string
}
```

#### List API Keys
```typescript
GET /api/keys
Headers: Authorization: Bearer <token>
Response: {
  success: boolean
  keys: {
    id: string
    name: string
    keyPrefix: string  // mock_prod_abc123***
    permissions: string[]
    isActive: boolean
    lastUsedAt: number
    createdAt: number
  }[]
}
```

#### Revoke API Key
```typescript
DELETE /api/keys/{keyId}
Headers: Authorization: Bearer <token>
Response: {
  success: boolean
}
```

#### API Usage Stats
```typescript
GET /api/keys/{keyId}/usage
Headers: Authorization: Bearer <token>
Query: ?start={timestamp}&end={timestamp}
Response: {
  success: boolean
  usage: {
    totalRequests: number
    successfulRequests: number
    failedRequests: number
    averageResponseTime: number
    requestsByEndpoint: { endpoint: string, count: number }[]
    requestsByDay: { date: string, count: number }[]
  }
}
```

### Public API Endpoints

#### Transform Image
```typescript
POST /api/v1/transform
Headers: {
  Authorization: Bearer <api_key>
  Content-Type: application/json
}
Body: {
  image: string  // Base64 encoded or URL
  prompt: string
  style?: 'realistic' | 'artistic' | 'professional'
  outputFormat?: 'png' | 'jpeg' | 'webp'
  quality?: number  // 1-100
}
Response: {
  success: boolean
  transformedImage: string  // Base64 or URL
  processingTime: number
  usageRemaining: number
}

Rate Limits:
- Professional: 100 requests/hour
- Enterprise: 1000 requests/hour

Error Codes:
- 401: Invalid API key
- 403: Rate limit exceeded
- 400: Invalid request
- 500: Processing error
```

#### Batch Transform
```typescript
POST /api/v1/batch
Headers: {
  Authorization: Bearer <api_key>
  Content-Type: application/json
}
Body: {
  images: string[]  // Array of base64 or URLs
  prompt: string
  style?: string
  outputFormat?: string
  quality?: number
  webhookUrl?: string  // Callback when complete
}
Response: {
  success: boolean
  batchId: string
  status: 'processing'
  estimatedTime: number  // seconds
}

Rate Limits:
- Professional: 50 images per batch
- Enterprise: 500 images per batch
```

#### Check Batch Status
```typescript
GET /api/v1/batch/{batchId}
Headers: {
  Authorization: Bearer <api_key>
}
Response: {
  success: boolean
  status: 'processing' | 'complete' | 'failed'
  completed: number
  total: number
  results: {
    originalImage: string
    transformedImage: string
  }[]
  errors: string[]
}
```

#### Create Gallery via API
```typescript
POST /api/v1/gallery
Headers: {
  Authorization: Bearer <api_key>
  Content-Type: application/json
}
Body: {
  title: string
  description?: string
  images: string[]  // URLs or base64
  expiresInDays?: number
  allowComments?: boolean
  allowDownloads?: boolean
}
Response: {
  success: boolean
  galleryId: string
  shareUrl: string
  shareToken: string
}
```

### UI Components

#### API Dashboard
**Location:** `/app/(mockavio)/settings/api/page.tsx`

**Sections:**

1. **Quick Start**
   - Code examples in multiple languages
   - Copy code button
   - Links to full documentation

2. **API Keys**
   - List of all keys
   - Create new key button
   - Revoke key button (with confirmation)
   - Last used timestamp

3. **Usage & Billing**
   - Current usage meter
   - Usage by key (table)
   - Rate limit status
   - Upgrade prompt if near limits

4. **Rate Limits**
   - Current plan limits
   - Requests used/remaining
   - Reset time countdown

5. **Documentation**
   - Link to API docs
   - Changelog
   - Support contact

#### API Key Creation Modal
**Location:** `components/mockavio/CreateApiKeyModal.tsx`

**Steps:**

**Step 1: Name & Permissions**
- Key name input
- Checkboxes for permissions:
  - ☐ Transform images
  - ☐ Batch processing
  - ☐ Create galleries
  - ☐ Access analytics

**Step 2: Configuration**
- Rate limit (based on plan, non-editable)
- Optional expiration date
- Environment tag (production/staging/development)

**Step 3: Security**
- Warning: "This key will only be shown once"
- Copy key button
- Download as .env file button
- Security best practices tips

### API Documentation Site

**Location:** `/api-docs` (separate mini-site or docs subdomain)

**Sections:**

1. **Getting Started**
   - Authentication
   - Rate limits
   - Error handling
   - Code examples

2. **Endpoints**
   - Transform
   - Batch
   - Gallery
   - Usage stats

3. **SDKs** (future)
   - JavaScript/TypeScript
   - Python
   - Ruby
   - PHP

4. **Webhooks**
   - Batch completion
   - Gallery view notification
   - Usage alerts

5. **Changelog**
   - API version history
   - Breaking changes
   - New features

### Code Examples

#### JavaScript/Node.js
```javascript
const mockavio = require('@mockavio/sdk')

const client = new mockavio.Client({
  apiKey: process.env.MOCKAVIO_API_KEY
})

async function transformImage() {
  const result = await client.transform({
    image: 'https://example.com/room.jpg',
    prompt: 'Modern farmhouse staging with gray sectional'
  })

  console.log('Transformed:', result.transformedImage)
}
```

#### Python
```python
import mockavio

client = mockavio.Client(api_key=os.environ['MOCKAVIO_API_KEY'])

result = client.transform(
  image='https://example.com/room.jpg',
  prompt='Modern farmhouse staging with gray sectional'
)

print(f'Transformed: {result.transformed_image}')
```

#### cURL
```bash
curl -X POST https://mockavio.com/api/v1/transform \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "image": "https://example.com/room.jpg",
    "prompt": "Modern farmhouse staging with gray sectional"
  }'
```

### Rate Limiting Implementation

```typescript
// middleware/rate-limit.ts

import { Ratelimit } from '@upstash/ratelimit'
import { Redis } from '@upstash/redis'

const redis = Redis.fromEnv()

const rateLimiters = {
  professional: new Ratelimit({
    redis,
    limiter: Ratelimit.slidingWindow(100, '1 h')
  }),
  enterprise: new Ratelimit({
    redis,
    limiter: Ratelimit.slidingWindow(1000, '1 h')
  })
}

export async function checkRateLimit(
  apiKey: string,
  plan: 'professional' | 'enterprise'
) {
  const limiter = rateLimiters[plan]
  const { success, remaining, reset } = await limiter.limit(apiKey)

  return {
    allowed: success,
    remaining,
    resetAt: reset
  }
}
```

### Implementation Steps
1. Create apiKeys and apiUsage schema
2. Build API key generation system
3. Implement key hashing and storage
4. Create rate limiting middleware
5. Build public API endpoints
6. Implement authentication middleware
7. Create API dashboard UI
8. Build usage tracking system
9. Create API documentation site
10. Write code examples for multiple languages
11. Implement webhook system
12. Create SDK packages (future)
13. Add monitoring and alerts
14. Test security thoroughly

---

## 5. Additional Features

### Batch Processing UI Enhancements

**Current:** Basic batch upload and process

**Enhancements:**
- Progress indicator for each image
- Pause/resume batch processing
- Retry failed images
- Export batch results as ZIP
- Save batch as template for reuse
- Scheduled batch processing (overnight runs)

### Advanced Prompt Templates

**Industry-Specific Templates:**
- Real Estate: "Staging", "Renovation", "Landscaping"
- Interior Design: "Style Transfer", "Color Scheme", "Furniture Swap"
- Restaurants: "Plating Style", "Seasonal Theme", "Lighting Mood"

**Custom Templates:**
- Save frequently used prompts
- Share templates with team
- Community template library (future)

### Image History Enhancements

**Current:** Linear history sidebar

**Enhancements:**
- Branch history (create variations from any point)
- Compare view (side-by-side up to 4 images)
- Export history as presentation
- Annotate images with notes
- Star/favorite specific versions
- Search history by prompt keywords

### Collaboration Features

**Real-time Editing:**
- See when team members are viewing/editing
- Cursor presence indicators
- Live chat on projects
- Activity feed ("Jamie added 3 images")

**Version Control:**
- Named versions ("Final - Client Approved")
- Revert to previous versions
- Fork projects (create copy to experiment)

### Integration Opportunities

**Real Estate Platforms:**
- Zillow
- Realtor.com
- MLS systems

**Design Tools:**
- Houzz
- SketchUp
- AutoCAD (via plugin)

**Restaurant Tech:**
- MenuSparks (Derek's existing product!)
- Toast POS
- Square

**Productivity:**
- Slack notifications
- Zapier workflows
- Google Drive sync
- Dropbox integration

---

## Success Metrics for Features

### Team Workspaces
- Adoption rate: 60% of Professional plans use teams within 30 days
- Average team size: 3-4 members
- Team retention: 90%+ (higher than individual)

### White Label Exports
- Usage: 80% of Pro customers use white label monthly
- Upsell driver: 30% of Starter users upgrade for this feature

### Client Galleries
- Creation rate: 2-3 galleries per customer per month
- Client engagement: 70%+ of galleries get comments/votes
- Close rate impact: Track if gallery users close more deals

### API Access
- Adoption: 20% of Professional, 80% of Enterprise
- Integration partners: 5+ within 6 months
- API-driven revenue: 15% of total MRR

---

## Technical Debt & Considerations

### Performance
- Image processing at scale (100+ concurrent)
- CDN for transformed images
- Caching strategy for common transformations
- Database query optimization for large teams

### Security
- API key encryption
- Rate limiting per key
- IP whitelisting for enterprise
- GDPR compliance for client data
- Regular security audits

### Scalability
- Horizontal scaling for image processing
- Queue system for batch jobs
- Database sharding for large teams
- Multi-region support (future)

### Monitoring
- Error tracking (Sentry)
- Performance monitoring (Vercel Analytics)
- Usage analytics (Mixpanel/Amplitude)
- API uptime monitoring (Pingdom)
